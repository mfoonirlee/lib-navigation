!function(a,b){function c(a){a=a||"";var b=this,c={};if(a&&"string"==typeof a)for(var d=a.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");c[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}else if("object"==typeof a)for(var g in a)c[g]=a[g];for(var g in c)!function(a){Object.defineProperty(b,a,{get:function(){return c[a]},set:function(b){c[a]=b},enumerable:!0})}(g);this.toString=function(){return Object.keys(c).sort().map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(c[a])}).join("&")}}function d(){function b(a){var b=f.createElement("a");b.href=a;var c=f.createEvent("HTMLEvents");c.initEvent("click",!1,!0),j&&(b.style.cssText="display:none;",f.body.appendChild(b)),b.dispatchEvent(c)}function d(a,b){var c=f.createEvent("HTMLEvents");if(c.initEvent(a,!1,!1),b)for(var d in b)c[d]=b[d];window.dispatchEvent(c)}function e(){this.exec=function(){d("navigation:push")}}function i(){this.exec=function(){d("navigation:pop")}}function k(){this.exec=function(){d("navigation:replace")}}function l(a,b){return a.name===b.name&&a.args.toString()===b.args.toString()}var m=this,n=[],o=!!h.state,p={},q="initial";n.exec=function(){n.length&&n.shift().exec()},this.push=function(a,e){var f={name:a,args:new c(e),id:p.state.id+1};if(!l(f,p.state)){q="push";var g=f.args.toString();if(o){var i="#"+f.name+(g?"?"+g:"");h.pushState({name:f.name,args:g,id:f.id},null,i),d("pushstate")}else{var i="#"+f.name+"["+f.id+"]"+(g?"?"+g:"");b(i)}}},this.pop=function(){p.state.id>1&&(q="pop",h.back())},this.replace=function(a,e){var f={name:a,args:new c(e),id:p.state.id};if(!l(f,p.state)){q="replace";var g=f.args.toString();if(o){var i="#"+f.name+(g?"?"+g:"");h.replaceState({name:f.name,args:g,id:f.id},null,i),d("replacestate")}else{var i="#"+f.name+"["+f.id+"]"+(g?"?"+g:"");b(i)}}};var r=!1;this.start=function(b){function d(){var a;if(o&&null!=h.state&&h.state!==!0)a={id:h.state.id,name:h.state.name,args:new c(h.state.args)};else{var b=g.hash,d=b.match(/#([^\[\]\?]+)(?:\[(\d+)\])?(?:\?(.*))?/)||["",j,1,l];a={name:d[1],id:parseInt(d[2]||1),args:new c(d[3]||"")}}return a}function f(){var a=d(),b=p.state;p.state=a,a.id<b.id?(q="pop",n.push(new i(a,a.id-b.id))):a.id===b.id?"replace"===m.action?n.push(new k(a)):console.error("请勿用location.hash或location.href来改变hash值"):(q="push",n.push(new e(a,a.id-b.id))),n.exec()}if(!r){r=!0;var j=b.defaultPath||"",l=b.defaultArgs||"";o&=!!b.useHistoryState,Object.defineProperty(this,"useHistoryState",{get:function(){return o}}),Object.defineProperty(this,"action",{get:function(){return q}}),Object.defineProperty(this,"state",{get:function(){return{id:p.state.id,name:p.state.name,args:p.state.args}}});var s=d();o?(a.addEventListener("pushstate",f,!1),a.addEventListener("popstate",f,!1),a.addEventListener("replacestate",f,!1)):a.addEventListener("hashchange",f,!1),p.state=s,n.push(new e(s)),n.exec()}}}var e,f=a.document,g=a.location,h=a.history,i=a.navigator.userAgent,j=i.match(/MSIE\s*([\d\.]+)/);j&&(e=parseInt(j[1])),j||!h.state&&h.replaceState&&h.replaceState(!0);window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){setTimeout(a,1/60)};b.navigation=d}(window,window.lib||(window.lib={}));